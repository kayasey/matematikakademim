webpackJsonp([44],{1823:function(l,n,u){"use strict";function i(l){return c._42(0,[(l()(),c._16(0,0,null,null,21,"div",[],null,null,null,null,null)),(l()(),c._40(-1,null,["\n                "])),(l()(),c._16(2,0,null,null,2,"p",[["padding",""]],null,null,null,null,null)),(l()(),c._40(3,null,["",""])),c._32(131072,T.a,[L.a,c.i]),(l()(),c._40(-1,null,["\n                "])),(l()(),c._16(6,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,H.b,H.a)),c._15(7,1097728,null,3,O.a,[A.a,B.a,c.p,c.K,[2,M.a]],null,null),c._37(335544320,2,{contentLabel:0}),c._37(603979776,3,{_buttons:1}),c._37(603979776,4,{_icons:1}),c._15(11,16384,null,0,W.a,[],null,null),(l()(),c._40(-1,2,["\n                    "])),(l()(),c._16(13,0,null,3,6,"ion-input",[["formControlName","siteUrl"],["name","url"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,D.b,D.a)),c._15(14,81920,null,0,E.a,[c.p,p.a,$.a,[2,N.a]],{coreAutoFocus:[0,"coreAutoFocus"]},null),c._15(15,671744,null,0,b.f,[[3,b.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),c._35(2048,null,b.m,null,[b.f]),c._15(17,16384,null,0,b.n,[b.m],null,null),c._15(18,5423104,null,0,j.a,[B.a,V.a,A.a,q.a,c.p,c.K,[2,R.a],[2,O.a],[2,b.m],J.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),c._32(131072,T.a,[L.a,c.i]),(l()(),c._40(-1,2,["\n                "])),(l()(),c._40(-1,null,["\n            "]))],function(l,n){l(n,14,0,n.component.showKeyboard);l(n,15,0,"siteUrl");l(n,18,0,"url",c._19(1,"",c._41(n,18,1,c._29(n,19).transform("core.login.siteaddress")),""))},function(l,n){l(n,3,0,c._41(n,3,0,c._29(n,4).transform("core.login.newsitedescription")));l(n,13,0,c._29(n,17).ngClassUntouched,c._29(n,17).ngClassTouched,c._29(n,17).ngClassPristine,c._29(n,17).ngClassDirty,c._29(n,17).ngClassValid,c._29(n,17).ngClassInvalid,c._29(n,17).ngClassPending)})}function e(l){return c._42(0,[(l()(),c._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),c._15(1,16384,[[8,4]],0,z.a,[c.p],{value:[0,"value"]},null),(l()(),c._40(2,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.url)},function(l,n){l(n,2,0,n.context.$implicit.name)})}function t(l){return c._42(0,[(l()(),c._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["margin-vertical",""]],null,null,null,H.b,H.a)),c._15(1,1097728,null,3,O.a,[A.a,B.a,c.p,c.K,[2,M.a]],null,null),c._37(335544320,5,{contentLabel:0}),c._37(603979776,6,{_buttons:1}),c._37(603979776,7,{_icons:1}),c._15(5,16384,null,0,W.a,[],null,null),(l()(),c._40(-1,2,["\n                    "])),(l()(),c._16(7,0,null,1,3,"ion-label",[["for","siteSelect"],["stacked",""]],null,null,null,null,null)),c._15(8,16384,[[5,4]],0,G.a,[B.a,c.p,c.K,[8,null],[8,""],[8,null],[8,null]],null,null),(l()(),c._40(9,null,["",""])),c._32(131072,T.a,[L.a,c.i]),(l()(),c._40(-1,2,["\n                    "])),(l()(),c._16(12,0,null,3,11,"ion-select",[["formControlName","siteUrl"],["interface","popover"],["name","url"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(l,n,u){var i=!0;if("click"===n){i=!1!==c._29(l,13)._click(u)&&i}if("keyup.space"===n){i=!1!==c._29(l,13)._keyup()&&i}return i},Q.b,Q.a)),c._15(13,1228800,null,1,X.a,[q.a,A.a,B.a,c.p,c.K,[2,O.a],Y.a],{placeholder:[0,"placeholder"],interface:[1,"interface"]},null),c._37(603979776,8,{options:1}),c._32(131072,T.a,[L.a,c.i]),c._35(1024,null,b.l,function(l){return[l]},[X.a]),c._15(17,671744,null,0,b.f,[[3,b.b],[8,null],[8,null],[2,b.l]],{name:[0,"name"]},null),c._35(2048,null,b.m,null,[b.f]),c._15(19,16384,null,0,b.n,[b.m],null,null),(l()(),c._40(-1,null,["\n                        "])),(l()(),c._11(16777216,null,null,1,null,e)),c._15(22,802816,null,0,Z.j,[c.W,c.T,c.v],{ngForOf:[0,"ngForOf"]},null),(l()(),c._40(-1,null,["\n                    "])),(l()(),c._40(-1,2,["\n                "]))],function(l,n){var u=n.component;l(n,13,0,c._19(1,"",c._41(n,13,0,c._29(n,15).transform("core.login.siteaddress")),""),"popover");l(n,17,0,"siteUrl");l(n,22,0,u.fixedSites)},function(l,n){l(n,9,0,c._41(n,9,0,c._29(n,10).transform("core.login.selectsite")));l(n,12,0,c._29(n,13)._disabled,c._29(n,19).ngClassUntouched,c._29(n,19).ngClassTouched,c._29(n,19).ngClassPristine,c._29(n,19).ngClassDirty,c._29(n,19).ngClassValid,c._29(n,19).ngClassInvalid,c._29(n,19).ngClassPending)})}function o(l){return c._42(0,[(l()(),c._16(0,0,null,null,2,"a",[["block",""],["ion-button",""],["margin-bottom",""]],[[8,"title",0]],[[null,"click"]],function(l,n,u){var i=!0;if("click"===n){i=!1!==l.component.connect(l.context.$implicit.url)&&i}return i},ll.b,ll.a)),c._15(1,1097728,null,0,nl.a,[[8,""],B.a,c.p,c.K],{block:[0,"block"]},null),(l()(),c._40(2,0,["",""]))],function(l,n){l(n,1,0,"")},function(l,n){l(n,0,0,c._19(1,"",n.context.$implicit.name,""));l(n,2,0,n.context.$implicit.name)})}function a(l){return c._42(0,[(l()(),c._16(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),c._40(-1,null,["\n                    "])),(l()(),c._16(2,0,null,null,2,"p",[["class","padding no-padding-bottom"]],null,null,null,null,null)),(l()(),c._40(3,null,["",""])),c._32(131072,T.a,[L.a,c.i]),(l()(),c._40(-1,null,["\n                    "])),(l()(),c._11(16777216,null,null,1,null,o)),c._15(7,802816,null,0,Z.j,[c.W,c.T,c.v],{ngForOf:[0,"ngForOf"]},null),(l()(),c._40(-1,null,["\n                "]))],function(l,n){l(n,7,0,n.component.fixedSites)},function(l,n){l(n,3,0,c._41(n,3,0,c._29(n,4).transform("core.login.selectsite")))})}function r(l){return c._42(0,[(l()(),c._16(0,0,null,null,9,"div",[["text-wrap",""]],null,null,null,null,null)),(l()(),c._40(-1,null,["\n                "])),(l()(),c._40(-1,null,["\n                "])),(l()(),c._11(16777216,null,null,1,null,t)),c._15(4,16384,null,0,Z.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(l()(),c._40(-1,null,["\n\n                "])),(l()(),c._40(-1,null,["\n                "])),(l()(),c._11(16777216,null,null,1,null,a)),c._15(8,16384,null,0,Z.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(l()(),c._40(-1,null,["\n            "]))],function(l,n){var u=n.component;l(n,4,0,!u.displayAsButtons);l(n,8,0,u.displayAsButtons)},null)}function s(l){return c._42(0,[(l()(),c._16(0,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],null,null,ll.b,ll.a)),c._15(1,1097728,null,0,nl.a,[[8,""],B.a,c.p,c.K],{block:[0,"block"]},null),(l()(),c._40(2,0,["",""])),c._32(131072,T.a,[L.a,c.i])],function(l,n){l(n,1,0,"")},function(l,n){l(n,0,0,!n.component.siteForm.valid);l(n,2,0,c._41(n,2,0,c._29(n,3).transform("core.login.connect")))})}function _(l){return c._42(0,[(l()(),c._16(0,0,null,null,25,"ion-header",[],null,null,null,null,null)),c._15(1,16384,null,0,ul.a,[B.a,c.p,c.K,[2,il.a]],null,null),(l()(),c._40(-1,null,["\n    "])),(l()(),c._16(3,0,null,null,21,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,el.b,el.a)),c._15(4,49152,null,0,tl.a,[q.a,[2,il.a],[2,N.a],B.a,c.p,c.K],null,null),c._15(5,212992,null,0,ol.a,[tl.a,V.a,L.a,al.a],null,null),(l()(),c._40(-1,3,["\n        "])),(l()(),c._16(7,0,null,3,3,"ion-title",[],null,null,null,rl.b,rl.a)),c._15(8,49152,null,0,sl.a,[B.a,c.p,c.K,[2,_l.a],[2,tl.a]],null,null),(l()(),c._40(9,0,["",""])),c._32(131072,T.a,[L.a,c.i]),(l()(),c._40(-1,3,["\n\n        "])),(l()(),c._16(12,0,null,2,11,"ion-buttons",[["end",""]],null,null,null,null,null)),c._15(13,16384,null,1,cl.a,[B.a,c.p,c.K,[2,_l.a],[2,tl.a]],null,null),c._37(603979776,1,{_buttons:1}),(l()(),c._40(-1,null,["\n            "])),(l()(),c._16(16,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,u){var i=!0;if("click"===n){i=!1!==l.component.showHelp()&&i}return i},ll.b,ll.a)),c._15(17,1097728,[[1,4]],0,nl.a,[[8,""],B.a,c.p,c.K],null,null),c._32(131072,T.a,[L.a,c.i]),(l()(),c._40(-1,0,["\n                "])),(l()(),c._16(20,0,null,0,1,"ion-icon",[["name","help-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._15(21,147456,null,0,dl.a,[B.a,c.p,c.K],{name:[0,"name"]},null),(l()(),c._40(-1,0,["\n            "])),(l()(),c._40(-1,null,["\n        "])),(l()(),c._40(-1,3,["\n    "])),(l()(),c._40(-1,null,["\n"])),(l()(),c._40(-1,null,["\n"])),(l()(),c._16(27,0,null,null,28,"ion-content",[["class","core-center-view"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,gl.b,gl.a)),c._15(28,4374528,null,0,R.a,[B.a,V.a,J.a,c.p,c.K,q.a,pl.a,c.D,[2,il.a],[2,N.a]],null,null),(l()(),c._40(-1,1,["\n    "])),(l()(),c._16(30,0,null,1,24,"div",[["class","box"]],null,null,null,null,null)),(l()(),c._40(-1,null,["\n        "])),(l()(),c._16(32,0,null,null,3,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(l()(),c._40(-1,null,["\n            "])),(l()(),c._16(34,0,null,null,0,"img",[["class","avatar-full login-logo"],["role","presentation"],["src","assets/img/login_logo.png"]],null,null,null,null,null)),(l()(),c._40(-1,null,["\n        "])),(l()(),c._40(-1,null,["\n        "])),(l()(),c._16(37,0,null,null,16,"form",[["ion-list",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var i=!0,e=l.component;if("submit"===n){i=!1!==c._29(l,39).onSubmit(u)&&i}if("reset"===n){i=!1!==c._29(l,39).onReset()&&i}if("ngSubmit"===n){i=!1!==e.connect(e.siteForm.value.siteUrl)&&i}return i},null,null)),c._15(38,16384,null,0,b.w,[],null,null),c._15(39,540672,null,0,b.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),c._35(2048,null,b.b,null,[b.h]),c._15(41,16384,null,0,b.o,[b.b],null,null),(l()(),c._40(-1,null,["\n            "])),(l()(),c._40(-1,null,["\n            "])),(l()(),c._11(16777216,null,null,1,null,i)),c._15(45,16384,null,0,Z.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(l()(),c._40(-1,null,["\n\n            "])),(l()(),c._40(-1,null,["\n            "])),(l()(),c._11(16777216,null,null,1,null,r)),c._15(49,16384,null,0,Z.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(l()(),c._40(-1,null,["\n\n            "])),(l()(),c._11(16777216,null,null,1,null,s)),c._15(52,16384,null,0,Z.k,[c.W,c.T],{ngIf:[0,"ngIf"]},null),(l()(),c._40(-1,null,["\n        "])),(l()(),c._40(-1,null,["\n    "])),(l()(),c._40(-1,1,["\n"])),(l()(),c._40(-1,null,["\n"]))],function(l,n){var u=n.component;l(n,5,0);l(n,21,0,"help-circle");l(n,39,0,u.siteForm);l(n,45,0,!u.fixedSites);l(n,49,0,u.fixedSites);l(n,52,0,!u.fixedSites||!u.displayAsButtons)},function(l,n){l(n,3,0,c._29(n,4)._hidden,c._29(n,4)._sbPadding);l(n,9,0,c._41(n,9,0,c._29(n,10).transform("core.login.connecttomoodle")));l(n,16,0,c._41(n,16,0,c._29(n,18).transform("core.help")));l(n,20,0,c._29(n,21)._hidden);l(n,27,0,c._29(n,28).statusbarPadding,c._29(n,28)._hasRefresher);l(n,37,0,c._29(n,41).ngClassUntouched,c._29(n,41).ngClassTouched,c._29(n,41).ngClassPristine,c._29(n,41).ngClassDirty,c._29(n,41).ngClassValid,c._29(n,41).ngClassInvalid,c._29(n,41).ngClassPending)})}Object.defineProperty(n,"__esModule",{value:!0});var c=u(1),d=(u(0),u(10),u(11)),g=u(2),p=u(4),f=u(127),m=u(125),b=u(19),h=function(){function l(l,n,u,i,e,t,o,a){this.navCtrl=n,this.appProvider=i,this.sitesProvider=e,this.loginHelper=t,this.modalCtrl=o,this.domUtils=a,this.displayAsButtons=!1,this.showKeyboard=!1,this.showKeyboard=!!l.get("showKeyboard");var r="";this.loginHelper.hasSeveralFixedSites()&&(this.fixedSites=this.loginHelper.getFixedSites(),this.displayAsButtons="buttons"==f.a.multisitesdisplay,r=this.fixedSites[0].url),this.siteForm=u.group({siteUrl:[r,b.u.required]})}return l.prototype.connect=function(l){var n=this;if(this.appProvider.closeKeyboard(),l)if(this.appProvider.isOnline()){var u=this.domUtils.showModalLoading(),i=this.sitesProvider.getDemoSiteData(l);i?this.sitesProvider.getUserToken(i.url,i.username,i.password).then(function(l){return n.sitesProvider.newSite(l.siteUrl,l.token,l.privateToken).then(function(){return n.loginHelper.goToSiteInitialPage()},function(l){n.domUtils.showErrorModal(l)})},function(l){n.loginHelper.treatUserTokenError(i.url,l)}).finally(function(){u.dismiss()}):this.sitesProvider.checkSite(l).then(function(l){l.warning&&n.domUtils.showErrorModal(l.warning,!0,4e3),n.loginHelper.isSSOLoginNeeded(l.code)?n.loginHelper.confirmAndOpenBrowserForSSOLogin(l.siteUrl,l.code,l.service,l.config&&l.config.launchurl):n.navCtrl.push("CoreLoginCredentialsPage",{siteUrl:l.siteUrl,siteConfig:l.config})},function(u){n.showLoginIssue(l,u)}).finally(function(){u.dismiss()})}else this.domUtils.showErrorModal("core.networkerrormsg",!0);else this.domUtils.showErrorModal("core.login.siteurlrequired",!0)},l.prototype.showHelp=function(){this.modalCtrl.create("CoreLoginSiteHelpPage").present()},l.prototype.showLoginIssue=function(l,n){this.modalCtrl.create("CoreLoginSiteErrorPage",{siteUrl:l,issue:n}).present()},l}(),v=u(5),C=u(29),k=function(){return function(){}}(),y=u(1273),S=u(1274),w=u(1275),P=u(1276),U=u(1277),x=u(1278),K=u(1279),I=u(1280),F=u(1281),T=u(30),L=u(18),H=u(34),O=u(21),A=u(20),B=u(7),M=u(28),W=u(31),D=u(92),E=u(327),$=u(3),N=u(22),j=u(77),V=u(15),q=u(27),R=u(24),J=u(26),z=u(101),G=u(61),Q=u(114),X=u(102),Y=u(50),Z=u(9),ll=u(46),nl=u(41),ul=u(417),il=u(36),el=u(1282),tl=u(191),ol=u(632),al=u(13),rl=u(1283),sl=u(324),_l=u(236),cl=u(418),dl=u(42),gl=u(178),pl=u(100),fl=u(60),ml=u(197),bl=c._14({encapsulation:2,styles:[],data:{}}),hl=c._12("page-core-login-site",h,function(l){return c._42(0,[(l()(),c._16(0,0,null,null,1,"page-core-login-site",[],null,null,null,_,bl)),c._15(1,49152,null,0,h,[fl.a,N.a,b.d,d.a,g.a,m.a,ml.a,p.a],null,null)],null,null)},{},{},[]),vl=u(320),Cl=u(321),kl=u(323),yl=u(322),Sl=u(416),wl=u(631),Pl=u(237);u.d(n,"CoreLoginSitePageModuleNgFactory",function(){return Ul});var Ul=c._13(k,[],function(l){return c._25([c._26(512,c.n,c._6,[[8,[y.a,S.a,w.a,P.a,U.a,x.a,K.a,I.a,F.a,hl]],[3,c.n],c.B]),c._26(4608,Z.m,Z.l,[c.x,[2,Z.v]]),c._26(4608,b.x,b.x,[]),c._26(4608,b.d,b.d,[]),c._26(4608,vl.b,vl.a,[]),c._26(4608,Cl.a,Cl.b,[]),c._26(4608,kl.b,kl.a,[]),c._26(4608,yl.b,yl.a,[]),c._26(4608,L.a,L.a,[Sl.a,vl.b,Cl.a,kl.b,yl.b,L.b,L.c]),c._26(512,C.a,C.a,[]),c._26(512,Z.b,Z.b,[]),c._26(512,b.v,b.v,[]),c._26(512,b.i,b.i,[]),c._26(512,b.s,b.s,[]),c._26(512,wl.a,wl.a,[]),c._26(512,wl.b,wl.b,[]),c._26(512,v.a,v.a,[]),c._26(512,k,k,[]),c._26(256,Pl.a,h,[]),c._26(256,L.c,void 0,[]),c._26(256,L.b,void 0,[])])})}});