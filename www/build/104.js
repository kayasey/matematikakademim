webpackJsonp([104],{1845:function(n,l,t){"use strict";function u(n){return h._42(0,[(n()(),h._16(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,B.b,B.a)),h._15(1,49152,null,0,j.a,[],{message:[0,"message"],icon:[1,"icon"]},null),h._32(131072,F.a,[H.a,h.i]),(n()(),h._40(-1,0,["\n            "]))],function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function i(n){return h._42(0,[(n()(),h._16(0,0,null,null,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),h._15(1,16384,null,0,J.a,[],null,null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._16(3,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),h._15(4,4210688,null,0,V.a,[h.p,q.a,z.a,Q.a,S.a,P.a,X.a,Y.a,Z.a],null,null),h._33(5,{$a:0}),h._32(131072,F.a,[H.a,h.i]),(n()(),h._40(-1,null,["\n                        "]))],null,function(n,l){n(l,3,0,l.parent.context.$implicit.userprofileimageurl,h._41(l,3,1,h._29(l,6).transform("core.pictureof",n(l,5,0,l.parent.context.$implicit.userfullname))))})}function a(n){return h._42(0,[(n()(),h._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function s(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),h._40(1,null,["","",""])),h._32(131072,F.a,[H.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function e(n){return h._42(0,[(n()(),h._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function o(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""])),h._32(131072,F.a,[H.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.noteam")))})}function r(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""])),h._32(131072,F.a,[H.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.multipleteams")))})}function _(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""])),h._32(131072,F.a,[H.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.defaultteam")))})}function d(n){return h._42(0,[(n()(),h._16(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,e)),h._15(3,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,o)),h._15(6,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,r)),h._15(9,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,_)),h._15(12,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                        "]))],function(n,l){var t=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&!l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function c(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"ion-badge",[["text-center",""]],null,null,null,null,null)),h._15(1,16384,null,0,ln.a,[tn.a,h.p,h.K],{color:[0,"color"]},null),(n()(),h._40(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function g(n){return h._42(0,[(n()(),h._16(0,0,null,null,3,"ion-badge",[["text-center",""]],null,null,null,null,null)),h._15(1,16384,null,0,ln.a,[tn.a,h.p,h.K],{color:[0,"color"]},null),(n()(),h._40(2,null,["\n                            ","\n                        "])),h._32(131072,F.a,[H.a,h.i])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,h._41(l,2,0,h._29(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function m(n){return h._42(0,[(n()(),h._16(0,0,null,null,27,null,null,null,null,null,null,null)),(n()(),h._40(-1,null,["\n                    "])),(n()(),h._16(2,0,null,null,24,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.loadSubmission(n.context.$implicit)&&u}return u},un.b,un.a)),h._15(3,1097728,null,3,an.a,[sn.a,tn.a,h.p,h.K,[2,en.a]],null,null),h._37(335544320,3,{contentLabel:0}),h._37(603979776,4,{_buttons:1}),h._37(603979776,5,{_icons:1}),h._15(7,16384,null,0,on.a,[],null,null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,0,1,null,i)),h._15(10,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,a)),h._15(13,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,s)),h._15(16,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,d)),h._15(19,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,c)),h._15(22,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,g)),h._15(25,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                    "])),(n()(),h._40(-1,null,["\n                "]))],function(n,l){var t=l.component;n(l,10,0,l.context.$implicit.userprofileimageurl);n(l,13,0,l.context.$implicit.userfullname);n(l,16,0,!l.context.$implicit.userfullname);n(l,19,0,t.assign.teamsubmission);n(l,22,0,l.context.$implicit.statusTranslated);n(l,25,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.id==l.component.selectedSubmissionId)})}function f(n){return h._42(0,[(n()(),h._16(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,un.b,un.a)),h._15(1,1097728,null,3,an.a,[sn.a,tn.a,h.p,h.K,[2,en.a]],null,null),h._37(335544320,6,{contentLabel:0}),h._37(603979776,7,{_buttons:1}),h._37(603979776,8,{_icons:1}),h._15(5,16384,null,0,on.a,[],null,null),(n()(),h._40(-1,2,["\n                    "])),(n()(),h._16(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),h._15(8,147456,[[8,4]],0,rn.a,[tn.a,h.p,h.K],{name:[0,"name"]},null),(n()(),h._40(9,2,["\n                    ","\n                "])),h._32(131072,F.a,[H.a,h.i])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,h._29(l,8)._hidden);n(l,9,0,h._41(l,9,0,h._29(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function p(n){return h._42(0,[h._37(402653184,1,{splitviewCtrl:0}),(n()(),h._16(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),h._15(2,16384,null,0,_n.a,[tn.a,h.p,h.K,[2,dn.a]],null,null),(n()(),h._40(-1,null,["\n    "])),(n()(),h._16(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,cn.b,cn.a)),h._15(5,49152,null,0,gn.a,[mn.a,[2,dn.a],[2,fn.a],tn.a,h.p,h.K],null,null),h._15(6,212992,null,0,pn.a,[gn.a,Q.a,H.a,x.a],null,null),(n()(),h._40(-1,3,["\n        "])),(n()(),h._16(8,0,null,3,3,"ion-title",[],null,null,null,hn.b,hn.a)),h._15(9,49152,null,0,bn.a,[tn.a,h.p,h.K,[2,vn.a],[2,gn.a]],null,null),(n()(),h._16(10,0,null,0,1,"core-format-text",[],null,null,null,null,null)),h._15(11,540672,null,0,In.a,[h.p,S.a,P.a,xn.a,H.a,Q.a,Z.a,X.a,q.a,z.a,Y.a,Sn.a,[2,fn.a],[2,Pn.a],[2,k.a],Tn.a,x.a],{text:[0,"text"]},null),(n()(),h._40(-1,3,["\n\n        "])),(n()(),h._16(13,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),h._15(14,16384,null,1,$n.a,[tn.a,h.p,h.K,[2,vn.a],[2,gn.a]],null,null),h._37(603979776,2,{_buttons:1}),(n()(),h._40(-1,3,["\n    "])),(n()(),h._40(-1,null,["\n"])),(n()(),h._40(-1,null,["\n"])),(n()(),h._16(19,0,null,null,32,"core-split-view",[],null,null,null,An.b,An.a)),h._15(20,245760,[[1,4]],0,k.a,[[2,fn.a],h.p,kn.a,Q.a,H.a],null,null),(n()(),h._40(-1,0,["\n    "])),(n()(),h._16(22,0,null,0,28,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Dn.b,Dn.a)),h._15(23,4374528,null,0,Pn.a,[tn.a,Q.a,yn.a,h.p,h.K,mn.a,Cn.a,h.D,[2,dn.a],[2,fn.a]],null,null),(n()(),h._40(-1,1,["\n        "])),(n()(),h._16(25,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,t){var u=!0;if("ionRefresh"===l){u=!1!==n.component.refreshList(t)&&u}return u},null,null)),h._15(26,212992,null,0,wn.a,[Q.a,Pn.a,h.D,On.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),h._40(-1,null,["\n            "])),(n()(),h._16(28,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Wn.b,Wn.a)),h._15(29,114688,null,0,En.a,[wn.a,tn.a],{pullingText:[0,"pullingText"]},null),h._32(131072,F.a,[H.a,h.i]),(n()(),h._40(-1,null,["\n        "])),(n()(),h._40(-1,1,["\n        "])),(n()(),h._16(33,0,null,1,16,"core-loading",[],null,null,null,Gn.b,Gn.a)),h._15(34,638976,null,0,Kn.a,[H.a,h.p,x.a,Z.a],{hideUntil:[0,"hideUntil"]},null),(n()(),h._40(-1,0,["\n            "])),(n()(),h._11(16777216,null,0,1,null,u)),h._15(37,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,0,["\n\n            "])),(n()(),h._16(39,0,null,0,9,"ion-list",[],null,null,null,null,null)),h._15(40,16384,null,0,Un.a,[tn.a,h.p,h.K,Q.a,On.l,yn.a],null,null),(n()(),h._40(-1,null,["\n                "])),(n()(),h._40(-1,null,["\n                "])),(n()(),h._11(16777216,null,null,1,null,m)),h._15(44,802816,null,0,nn.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(n()(),h._40(-1,null,["\n\n                "])),(n()(),h._11(16777216,null,null,1,null,f)),h._15(47,16384,null,0,nn.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n            "])),(n()(),h._40(-1,0,["\n        "])),(n()(),h._40(-1,1,["\n    "])),(n()(),h._40(-1,0,["\n"])),(n()(),h._40(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,6,0);n(l,11,0,t.title),n(l,20,0);n(l,26,0,t.loaded);n(l,29,0,h._19(1,"",h._41(l,29,0,h._29(l,30).transform("core.pulltorefresh")),""));n(l,34,0,t.loaded);n(l,37,0,!t.submissions||0==t.submissions.length);n(l,44,0,t.submissions);n(l,47,0,!t.haveAllParticipants)},function(n,l){n(l,4,0,h._29(l,5)._hidden,h._29(l,5)._sbPadding);n(l,22,0,h._29(l,23).statusbarPadding,h._29(l,23)._hasRefresher);n(l,25,0,"inactive"!==h._29(l,26).state,h._29(l,26)._top);n(l,28,0,h._29(l,29).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var h=t(1),b=(t(0),t(10),t(5)),v=t(33),I=t(29),x=t(13),S=t(2),P=t(4),T=t(68),$=t(111),A=t(146),k=t(35),D=function(){function n(n,l,t,u,i,a,s,e){var o=this;this.domUtils=u,this.translate=i,this.assignProvider=a,this.assignOfflineProvider=s,this.assignHelper=e,this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==T.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=t.on(T.a.GRADED_EVENT,function(n){o.assign&&n.assignmentId==o.assign.id&&n.userId==l.getCurrentSiteUserId()&&(o.loaded=!1,o.refreshAllData().finally(function(){o.loaded=!0}))},l.getCurrentSiteId())}return n.prototype.ngOnInit=function(){var n=this;this.fetchAssignment().finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},n.prototype.fetchAssignment=function(){var n,l,t=this;return this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(n){return t.title=n.name||t.title,t.assign=n,t.haveAllParticipants=!0,t.assignProvider.getSubmissions(n.id)}).then(function(u){return u.canviewsubmissions?(l=u,t.assignHelper.getParticipants(t.assign).then(function(l){t.haveAllParticipants=!0,n=l}).catch(function(){t.haveAllParticipants=!1})):Promise.reject(null)}).then(function(){return t.assignProvider.getSubmissionsUserData(l.submissions,t.courseId,t.assign.id,t.assign.blindmarking&&!t.assign.revealidentities,n)}).then(function(n){var l=t.selectedStatus==T.a.NEED_GRADING,u=l?T.a.SUBMISSION_STATUS_SUBMITTED:t.selectedStatus,i=[];return t.submissions=[],n.forEach(function(n){u&&u!=n.status||i.push(t.assignOfflineProvider.getSubmissionGrade(t.assign.id,n.userid).catch(function(){}).then(function(u){var i=!1;return u&&n.timemodified<u.timemodified&&(i=!0),(l?t.assignProvider.needsSubmissionToBeGraded(n,t.assign.id):Promise.resolve(!0)).then(function(l){l&&(n.statusColor=t.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=t.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated=("success"!=n.statusColor||!n.gradingstatus)&&t.translate.instant("addon.mod_assign.submissionstatus_"+n.status),i?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId=("danger"!=n.statusColor||"danger"!=n.gradingColor)&&t.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus),t.submissions.push(n))})}))}),Promise.all(i)}).catch(function(n){t.domUtils.showErrorModalDefault(n,"Error getting assigment data.")})},n.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.id&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.id,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},n.prototype.refreshAllData=function(){var n=this,l=[];return l.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(l.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),l.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(l).finally(function(){return n.fetchAssignment()})},n.prototype.refreshList=function(n){this.refreshAllData().finally(function(){n.complete()})},n.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off()},n}(),y=function(){return function(){}}(),C=t(1273),w=t(1274),O=t(1275),W=t(1276),E=t(1277),G=t(1278),K=t(1279),U=t(1280),R=t(1281),M=t(1284),N=t(1285),L=t(1286),B=t(164),j=t(134),F=t(30),H=t(18),J=t(179),V=t(162),q=t(6),z=t(17),Q=t(15),X=t(25),Y=t(11),Z=t(3),nn=t(9),ln=t(212),tn=t(7),un=t(34),an=t(21),sn=t(20),en=t(28),on=t(31),rn=t(42),_n=t(417),dn=t(36),cn=t(1282),gn=t(191),mn=t(27),fn=t(22),pn=t(632),hn=t(1283),bn=t(324),vn=t(236),In=t(40),xn=t(12),Sn=t(23),Pn=t(24),Tn=t(38),$n=t(418),An=t(421),kn=t(63),Dn=t(178),yn=t(26),Cn=t(100),wn=t(133),On=t(37),Wn=t(192),En=t(145),Gn=t(57),Kn=t(51),Un=t(75),Rn=t(60),Mn=h._14({encapsulation:2,styles:[],data:{}}),Nn=h._12("page-addon-mod-assign-submission-list",D,function(n){return h._42(0,[(n()(),h._16(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,p,Mn)),h._15(1,245760,null,0,D,[Rn.a,S.a,x.a,P.a,H.a,T.a,$.a,A.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Ln=t(19),Bn=t(320),jn=t(321),Fn=t(323),Hn=t(322),Jn=t(416),Vn=t(631),qn=t(110),zn=t(237);t.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return Qn});var Qn=h._13(y,[],function(n){return h._25([h._26(512,h.n,h._6,[[8,[C.a,w.a,O.a,W.a,E.a,G.a,K.a,U.a,R.a,M.a,N.a,L.a,Nn]],[3,h.n],h.B]),h._26(4608,nn.m,nn.l,[h.x,[2,nn.v]]),h._26(4608,Ln.x,Ln.x,[]),h._26(4608,Ln.d,Ln.d,[]),h._26(4608,Bn.b,Bn.a,[]),h._26(4608,jn.a,jn.b,[]),h._26(4608,Fn.b,Fn.a,[]),h._26(4608,Hn.b,Hn.a,[]),h._26(4608,H.a,H.a,[Jn.a,Bn.b,jn.a,Fn.b,Hn.b,H.b,H.c]),h._26(512,nn.b,nn.b,[]),h._26(512,Ln.v,Ln.v,[]),h._26(512,Ln.i,Ln.i,[]),h._26(512,Ln.s,Ln.s,[]),h._26(512,Vn.a,Vn.a,[]),h._26(512,b.a,b.a,[]),h._26(512,I.a,I.a,[]),h._26(512,qn.a,qn.a,[]),h._26(512,v.a,v.a,[]),h._26(512,Vn.b,Vn.b,[]),h._26(512,y,y,[]),h._26(256,H.c,void 0,[]),h._26(256,H.b,void 0,[]),h._26(256,zn.a,D,[])])})}});